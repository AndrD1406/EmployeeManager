<form [formGroup]="form" (ngSubmit)="submit()">
    <div>
        <label>Full Name</label>
        <input formControlName="fullName" />
        <div *ngIf="fullName.invalid && fullName.touched">
        <small *ngIf="fullName.errors?.['required']">Required</small>
        <small *ngIf="fullName.errors?.['minlength']">Min 3 characters</small>
        </div>
    </div>

    <div>
        <label>Email</label>
        <input formControlName="email" />
        <div *ngIf="email.invalid && email.touched">
        <small *ngIf="email.errors?.['required']">Required</small>
        <small *ngIf="email.errors?.['email']">Invalid email</small>
        </div>
    </div>

    <div>
        <label>Position</label>
        <select formControlName="position">
        <option value="" disabled>Select...</option>
        <option *ngFor="let pos of ['Developer','Designer','QA','Manager']" [value]="pos">
            {{ pos }}
        </option>
        </select>
        <div *ngIf="position.invalid && position.touched">
        <small *ngIf="position.errors?.['required']">Required</small>
        </div>
    </div>

    <div>
        <label>Start Date</label>
        <input type="date" formControlName="startDate" />
        <div *ngIf="startDate.invalid && startDate.touched">
        <small *ngIf="startDate.errors?.['required']">Required</small>
        </div>
    </div>

    <div formArrayName="skills">
  <label>Skills</label>

  <ng-container *ngFor="let ctrl of skills.controls; let i = index">
    <app-skill-row
      formControlName="{{ i }}"
      class="skill-row-wrapper"
    >
      <button
        type="button"
        (click)="removeSkill(i)"
        class="btn-secondary"
      >
        Remove
      </button>
    </app-skill-row>

    <div *ngIf="skills.at(i).errors && (skills.at(i).touched || form.touched)">
      <small *ngIf="skills.at(i).errors?.['skillNameRequired']">
        Skill name is required.
      </small>
      <small *ngIf="skills.at(i).errors?.['skillNameTooShort']">
        Min 3 characters.
      </small>
    </div>
  </ng-container>

  <button
    type="button"
    (click)="addSkill()"
    [disabled]="skills.length >= 10"
    class="btn-primary"
  >
    Add Skill
  </button>
  <div *ngIf="skills.errors?.['maxlength']">
    <small>You can add up to 10 skills.</small>
  </div>
</div>

<div class="form-actions">
    <button type="button" (click)="onCancel()" class="btn-secondary">Cancel</button>
    <button type="submit" class="btn-primary">Save Employee</button>
</div>
</form>